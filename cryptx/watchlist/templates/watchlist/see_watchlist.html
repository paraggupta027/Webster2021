<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    {% include 'home/script.html' %}
    <title>{{name}}</title>
</head>

<body>
    {% include 'dashboard/navbar.html' %}

    <div class="container-fluid">
        <div class="row">
            {% include 'dashboard/sidenav.html' %}

            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">

                <div class="dropdown my-5">
                    <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
                      Add Coins
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                      <li><a class="dropdown-item" id="btc" onclick="addbtc()" href="#">BITCOIN</a></li>
                      <li><a class="dropdown-item" id = "eth" onclick="addeth()" href="#">ETHERUM</a></li>
                    </ul>
                  </div>

                <table class="table my-5">
                    <thead>
                        <tr style="font-size: x-large;">
                            <th scope="col">Name</th>
                            <th scope="col">Symbol</th>
                            <th scope="col">Price</th>
                            <th scope="col">Change</th>
                        </tr>
                    </thead>
                    <tbody>
                       {% for coin in coins_qs %}
                            <tr class="table-primary">
                                <th scope="row">
                                    <img style="height: 30px; width: 30px;" src="{% static 'dashboard/img/SVG/' %}{{coin.symbol}}.svg" alt="">
                                    <a style="text-decoration: none;color: black;" href="{% url 'coin_chart_page' coin.name %}">
                                        {{coin.name}}
                                    </a>
                                </th>
                                <td><b>{{coin.symbol}}</b></td>
                                <td style="font-weight: bolder;" id="id_price_{{coin.symbol}}"></td>
                                <td style="font-weight: bolder;" id="id_change_{{coin.symbol}}">0.00</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>

            </main>
        </div>
    </div>
</body>


<script src="{% static 'dashboard/js/live_search.js' %}"></script>

<script>

    let btc = document.getElementById('btc').innerHTML;
    let eth = document.getElementById('eth').innerHTML;
    // console.log(title);

    // console.log(btc);
    // console.log(eth);

    function addbtc(){
        console.log(btc);
        let title = document.title;
        var bt = btc;
        var url = '/watchlist/add_coin?coin='+bt + '&name='+title;
        var req = new XMLHttpRequest();
        // req.onload = function() {
        //     document.getElementById("demo").innerHTML = this.responseText;
        //     }
        req.open("GET", url, true);
        req.send();
    }

</script>

{% include 'watchlist/watchlist_prices_js.html' %}

</html>